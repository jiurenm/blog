---
title: "使用Github Action自动部署"
date: 2021-06-20T19:35:12+08:00
draft: true
tag: ["github", "hugo"]

---

Github Action是Github的持续集成服务，功能强大。Github将持续集成的操作，比如运行、测试、发布等称为action，并允许开发者把每个操作写成独立的脚本，使得其他人可以引用。

# hugo部署到vercel

1. 在hugo仓库的`.github/workflows`目录中生成workflow文件`ci.yml`
2. 使用  [Await for a Vercel deployment](https://github.com/UnlyEd/github-action-await-vercel) action：

{{<highlight yml>}}

name: CI
on:
  push:
​    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: UnlyEd/github-action-await-vercel@v1.1.0
        id: await-vercel
        env:
          VERCEL_TOKEN: [token]  # https://vercel.com/account/tokens 创建token
        with:
          deployment-url: [url]
          timeout: 10
      - name: Display deployment status
        run: "echo The deployment at ${{ fromJson(steps.await-vercel.outputs.deploymentDetails).url }} is ${{ fromJson(steps.await-vercel.outputs.deploymentDetails).readyState }}"
{{</highlight>}}

3. 推送即可
